# Работа с файлами в Python

## 1. Работа с файлами в Python

Python предоставляет мощные и гибкие инструменты для работы с файлами. Основные операции включают открытие, чтение, запись и закрытие файлов. Python поддерживает работу как с текстовыми, так и с бинарными файлами, а также с различными форматами данных, такими как CSV и JSON.

### Основные операции с файлами:
- **Открытие файла**: Используется функция `open()`, которая возвращает файловый объект.
- **Чтение из файла**: Методы `read()`, `readline()`, `readlines()` для текстовых файлов.
- **Запись в файл**: Методы `write()`, `writelines()` для текстовых файлов.
- **Закрытие файла**: Метод `close()`, хотя часто используется менеджер контекста `with` для автоматического закрытия.

### Пример:
```python
# Открытие файла для чтения
file = open('example.txt', 'r')
content = file.read()
file.close()

# Использование менеджера контекста
with open('example.txt', 'r') as file:
    content = file.read()
```

---

## 2. Открытие и закрытие файлов

### Открытие файла:
Функция `open()` используется для открытия файла и возвращает файловый объект. Основные параметры:
- **Путь к файлу**: Имя файла или полный путь.
- **Режим**: Определяет, как файл будет использоваться (чтение, запись, добавление и т.д.).
- **Кодировка**: Для текстовых файлов, например, `'utf-8'`.

#### Режимы открытия файла:
- `'r'`: Чтение (по умолчанию).
- `'w'`: Запись (создает новый файл или перезаписывает существующий).
- `'a'`: Добавление (добавляет данные в конец файла).
- `'b'`: Бинарный режим (например, `'rb'`, `'wb'`).
- `'+'`: Чтение и запись (например, `'r+'`, `'w+'`).

### Закрытие файла:
- Используйте метод `close()` для закрытия файла после завершения работы.
- Рекомендуется использовать менеджер контекста `with`, который автоматически закрывает файл.

### Пример:
```python
# Открытие файла для записи
file = open('example.txt', 'w', encoding='utf-8')
file.write('Привет, мир!')
file.close()

# Использование with
with open('example.txt', 'w', encoding='utf-8') as file:
    file.write('Привет, мир!')
```

---

## 3. Текстовые файлы

Текстовые файлы содержат символьные данные и обычно используются для хранения и обработки текста. В Python текстовые файлы открываются в режиме `'r'`, `'w'`, `'a'` и т.д.

### Методы для работы с текстовыми файлами:
- `read(size)`: Читает `size` байт или весь файл, если размер не указан.
- `readline()`: Читает одну строку.
- `readlines()`: Читает все строки и возвращает список.
- `write(string)`: Записывает строку в файл.
- `writelines(list)`: Записывает список строк в файл.

### Пример:
```python
# Чтение всего файла
with open('example.txt', 'r', encoding='utf-8') as file:
    content = file.read()
    print(content)

# Чтение построчно
with open('example.txt', 'r', encoding='utf-8') as file:
    for line in file:
        print(line.strip())

# Запись в файл
with open('example.txt', 'w', encoding='utf-8') as file:
    file.write('Новая строка\n')
```

---

## 4. Файлы CSV

CSV (Comma-Separated Values) — формат для хранения табличных данных. В Python для работы с CSV-файлами используется модуль `csv`.

### Основные функции модуля `csv`:
- `csv.reader`: Читает CSV-файл и возвращает итератор строк.
- `csv.writer`: Записывает данные в CSV-файл.
- `csv.DictReader`: Читает CSV-файл как список словарей.
- `csv.DictWriter`: Записывает словари в CSV-файл.

### Пример:
```python
import csv

# Чтение CSV-файла
with open('data.csv', 'r', encoding='utf-8') as file:
    reader = csv.reader(file)
    for row in reader:
        print(row)

# Запись в CSV-файл
with open('data.csv', 'w', encoding='utf-8', newline='') as file:
    writer = csv.writer(file)
    writer.writerow(['Имя', 'Возраст'])
    writer.writerow(['Иван', 25])

# Использование DictReader и DictWriter
with open('data.csv', 'r', encoding='utf-8') as file:
    reader = csv.DictReader(file)
    for row in reader:
        print(row['Имя'], row['Возраст'])
```

---

## 5. Бинарные файлы

Бинарные файлы содержат данные в бинарном формате, например, изображения, аудио, исполняемые файлы. Для работы с бинарными файлами используются режимы `'rb'`, `'wb'`, `'ab'` и т.д.

### Методы для работы с бинарными файлами:
- `read(size)`: Читает `size` байт.
- `write(bytes)`: Записывает байты в файл.
- `seek(offset)`: Перемещает указатель файла на указанный offset.

### Пример:
```python
# Чтение бинарного файла
with open('image.png', 'rb') as file:
    data = file.read()

# Запись в бинарный файл
with open('copy.png', 'wb') as file:
    file.write(data)
```

---

## 6. Основные свойства и методы файлов

Файловый объект в Python имеет ряд свойств и методов для управления файлом.

### Свойства:
- `name`: Имя файла.
- `mode`: Режим, в котором файл был открыт.
- `closed`: Булево значение, указывающее, закрыт ли файл.

### Методы:
- `read(size)`: Читает данные из файла.
- `write(data)`: Записывает данные в файл.
- `seek(offset)`: Перемещает указатель файла.
- `tell()`: Возвращает текущую позицию указателя.
- `close()`: Закрывает файл.

### Пример:
```python
with open('example.txt', 'r') as file:
    print(file.name)  # example.txt
    print(file.mode)  # r
    print(file.closed)  # False
    file.read()
print(file.closed)  # True
```

---

## 7. Сериализация и десериализация. CSV- и JSON-файлы

**Сериализация** — процесс преобразования объекта в формат, который можно сохранить или передать. **Десериализация** — обратный процесс.

### CSV:
- Используется для табличных данных.
- Модуль `csv` для работы с CSV-файлами.

### JSON:
- Формат для хранения и обмена данными.
- Модуль `json` для сериализации и десериализации.

### Пример с JSON:
```python
import json

# Сериализация
data = {'name': 'Иван', 'age': 25}
with open('data.json', 'w', encoding='utf-8') as file:
    json.dump(data, file)

# Десериализация
with open('data.json', 'r', encoding='utf-8') as file:
    loaded_data = json.load(file)
    print(loaded_data)  # {'name': 'Иван', 'age': 25}
```

---

## 8. Модуль shelve

Модуль `shelve` позволяет сохранять и восстанавливать объекты Python в файле, используя словарь-подобный интерфейс.

### Основные функции:
- `shelve.open(filename)`: Открывает файл для чтения и записи.
- Ключи должны быть строками, значения — любыми сериализуемыми объектами.

### Пример:
```python
import shelve

# Сохранение данных
with shelve.open('data.db') as shelf:
    shelf['key'] = {'name': 'Иван', 'age': 25}

# Чтение данных
with shelve.open('data.db') as shelf:
    data = shelf['key']
    print(data)  # {'name': 'Иван', 'age': 25}
```

---

## 9. Модуль OS и работа с файловой системой

Модуль `os` предоставляет функции для взаимодействия с операционной системой, включая работу с файлами и директориями.

### Основные функции:
- `os.path.join(path, *paths)`: Соединяет пути.
- `os.listdir(path)`: Возвращает список файлов и директорий.
- `os.mkdir(path)`: Создает директорию.
- `os.remove(path)`: Удаляет файл.
- `os.path.exists(path)`: Проверяет, существует ли путь.
- `os.path.isfile(path)`: Проверяет, является ли путь файлом.
- `os.path.isdir(path)`: Проверяет, является ли путь директорией.

### Пример:
```python
import os

# Создание директории
os.mkdir('new_dir')

# Проверка существования файла
if os.path.exists('example.txt'):
    print('Файл существует')

# Список файлов в директории
files = os.listdir('.')
print(files)
```

---

## 10. Программа подсчета слов

Программа для подсчета количества слов в текстовом файле.

### Пример:
```python
def count_words(filename):
    try:
        with open(filename, 'r', encoding='utf-8') as file:
            content = file.read()
            words = content.split()
            return len(words)
    except FileNotFoundError:
        return 0

# Использование
word_count = count_words('example.txt')
print(f'Количество слов: {word_count}')
```

### Объяснение:
- Функция `count_words` открывает файл, читает его содержимое, разбивает на слова с помощью `split()` и возвращает количество слов.
- Обработка исключения `FileNotFoundError`, если файл не найден.

---

Этот документ предоставляет исчерпывающие ответы на контрольные вопросы по работе с файлами в Python, включая примеры кода и детальные объяснения.
# Работа с архивами, датами и ООП в Python

## 11. Запись и чтение архивных zip-файлов

В Python для работы с ZIP-архивами используется модуль `zipfile`. Этот модуль позволяет создавать, читать, записывать и извлекать файлы из ZIP-архивов. Основной класс в этом модуле — `ZipFile`, который предоставляет методы для работы с архивами.

### Создание ZIP-архива
Для создания архива используется режим `'w'` (write). Метод `write` добавляет файлы в архив.

```python
import zipfile

with zipfile.ZipFile('archive.zip', 'w') as zipf:
    zipf.write('file1.txt')
    zipf.write('file2.txt')
```
Этот код создает архив `archive.zip` и добавляет в него два файла.

### Чтение ZIP-архива
Для чтения используется режим `'r'` (read). Метод `namelist` возвращает список файлов, а метод `open` открывает файл из архива.

```python
with zipfile.ZipFile('archive.zip', 'r') as zipf:
    print(zipf.namelist())  # Список файлов
    with zipf.open('file1.txt') as f:
        content = f.read()
        print(content)
```

### Извлечение файлов
Метод `extract` извлекает один файл, а `extractall` — все файлы.

```python
with zipfile.ZipFile('archive.zip', 'r') as zipf:
    zipf.extractall('extracted_dir')  # Извлечь все файлы
```

---

## 12. Работа с датами и временем в Python

Модуль `datetime` используется для работы с датами и временем. Он предоставляет классы: `date`, `time`, `datetime`, `timedelta`.

### Создание объекта
Класс `datetime` объединяет дату и время.

```python
from datetime import datetime

dt = datetime(2023, 10, 1, 12, 30, 0)
print(dt)  # 2023-10-01 12:30:00
```

### Форматирование
Метод `strftime` преобразует объект в строку.

```python
formatted = dt.strftime("%Y-%m-%d %H:%M:%S")
print(formatted)  # 2023-10-01 12:30:00
```

### Парсинг
Метод `strptime` преобразует строку в объект `datetime`.

```python
parsed = datetime.strptime("2023-10-01 12:30:00", "%Y-%m-%d %H:%M:%S")
print(parsed)  # 2023-10-01 12:30:00
```

---

## 13. Модуль datetime

Модуль `datetime` предоставляет инструменты для работы с датами и временем.

### Основные классы
- `date`: Только дата.
- `time`: Только время.
- `datetime`: Дата и время.
- `timedelta`: Разница между датами.

```python
from datetime import datetime, timedelta

dt = datetime(2023, 10, 1, 12, 0)
delta = timedelta(days=1)
new_dt = dt + delta
print(new_dt)  # 2023-10-02 12:00:00
```

---

## 14. Операции с датами

### Добавление и вычитание
Класс `timedelta` позволяет изменять даты.

```python
from datetime import datetime, timedelta

dt = datetime(2023, 10, 1)
new_dt = dt + timedelta(days=7)
print(new_dt)  # 2023-10-08 00:00:00
```

### Разница между датами
Разница возвращает объект `timedelta`.

```python
dt1 = datetime(2023, 10, 1)
dt2 = datetime(2023, 10, 10)
diff = dt2 - dt1
print(diff.days)  # 9
```

---

## 15. Классы и объекты

Классы — основа ООП в Python. Они определяют атрибуты и методы объектов.

```python
class Person:
    def __init__(self, name, age):
        self.name = name
        self.age = age

    def greet(self):
        print(f"Привет, я {self.name}, мне {self.age} лет.")

person = Person("Иван", 30)
person.greet()  # Привет, я Иван, мне 30 лет.
```

---

## 16. Инкапсуляция, атрибуты и свойства

Инкапсуляция ограничивает доступ к данным. Используются `_` (защищенные) и `__` (приватные) атрибуты.

### Пример
```python
class Person:
    def __init__(self, name, age):
        self._name = name
        self.__age = age

    @property
    def age(self):
        return self.__age

    @age.setter
    def age(self, value):
        if value > 0:
            self.__age = value
```

---

## 17. Наследование

Наследование позволяет создавать классы на основе других.

```python
class Employee(Person):
    def __init__(self, name, age, salary):
        super().__init__(name, age)
        self.salary = salary

    def work(self):
        print(f"{self.name} работает.")
```

---

## 18. Переопределение функционала базового класса

Переопределение изменяет методы базового класса.

```python
class Manager(Employee):
    def work(self):
        print(f"{self.name} управляет.")
```

---

## 19. Атрибуты классов и статические методы

### Атрибуты класса
Общие для всех объектов.

```python
class Person:
    count = 0

    def __init__(self, name):
        self.name = name
        Person.count += 1
```

### Статические методы
Не требуют экземпляра.

```python
class Math:
    @staticmethod
    def add(a, b):
        return a + b

print(Math.add(3, 4))  # 7
```

---

## 20. Класс object. Строковое представление объекта

Все классы наследуются от `object`. Методы `__str__` и `__repr__` задают строковое представление.

```python
class Person:
    def __init__(self, name):
        self.name = name

    def __str__(self):
        return f"Person: {self.name}"

person = Person("Иван")
print(person)  # Person: Иван
```
# Обработка ошибок, модули, визуализация и библиотеки в Python

## 21. Обработка ошибок и исключений в Python

Обработка ошибок и исключений в Python — это механизм, который позволяет программе корректно реагировать на ошибки, возникающие во время выполнения. Исключения представляют собой объекты, сигнализирующие об ошибке, и помогают избежать аварийного завершения программы.

### Основные понятия
- **Исключение**: Объект, описывающий ошибку или нестандартную ситуацию.
- **Обработка исключений**: Использование конструкций вроде `try`, `except`, `finally` для управления поведением программы при возникновении ошибок.

---

## 22. Конструкция try...except...finally

Конструкция `try...except...finally` используется для обработки исключений и управления потоком выполнения программы.

- **try**: Блок кода, в котором может возникнуть исключение.
- **except**: Блок для обработки конкретного исключения.
- **finally**: Блок, который выполняется всегда, независимо от возникновения исключения.

### Пример:
```python
try:
    result = 1 / 0
except ZeroDivisionError:
    print("Деление на ноль!")
finally:
    print("Завершение обработки.")
```
**Вывод:**
```
Деление на ноль!
Завершение обработки.
```

---

## 23. except и обработка разных типов исключений

С помощью `except` можно обрабатывать несколько типов исключений, указав их в кортеже или используя отдельные блоки `except` для разных случаев.

### Пример:
```python
try:
    num = int("abc")
except (TypeError, ValueError):
    print("Неверный тип или значение.")
except ZeroDivisionError:
    print("Деление на ноль.")
```
**Вывод:**
```
Неверный тип или значение.
```

---

## 24. Генерация исключений и создание своих типов исключений

- **Генерация исключений**: Используйте оператор `raise` для вызова исключения вручную.
- **Свои исключения**: Создавайте пользовательские классы исключений, наследуя их от базового класса `Exception`.

### Пример:
```python
class MyError(Exception):
    pass

try:
    raise MyError("Ошибка!")
except MyError as e:
    print(e)
```
**Вывод:**
```
Ошибка!
```

---

## 25. Модули. Пакеты. Классификация

- **Модуль**: Отдельный файл с кодом Python (например, `module.py`), содержащий функции, классы или переменные.
- **Пакет**: Директория, содержащая модули и специальный файл `__init__.py`, который делает её пакетом.

### Классификация:
- Модули: независимые единицы кода.
- Пакеты: структурированные наборы модулей.

---

## 26. Подключение и использование модулей и пакетов. Специальные атрибуты

- **Импорт модулей**: Используйте `import` или `from ... import ...`.
- **Специальные атрибуты**:
  - `__name__`: Имя модуля или `"__main__"`, если файл запущен напрямую.
  - `__file__`: Путь к файлу модуля.
  - `__doc__`: Документация модуля.

### Пример:
```python
import math
print(math.pi)  # 3.141592653589793
```

---

## 27. Стандартная библиотека Python

Стандартная библиотека Python включает множество встроенных модулей для работы с файлами (`os`, `shutil`), сетью (`socket`, `http`), базами данных (`sqlite3`) и другими задачами. Это мощный инструмент для разработки без необходимости установки сторонних библиотек.

---

## 28. Регулярные выражения

Регулярные выражения в Python реализуются через модуль `re`. Они позволяют искать, заменять и анализировать текстовые данные по заданным шаблонам.

### Пример:
```python
import re
pattern = re.compile(r'\d+')  # Поиск цифр
match = pattern.search("abc123")
print(match.group())  # 123
```

---

## 29. Визуализация данных. Инструменты визуализации. Matplotlib

Matplotlib — это популярная библиотека Python для создания графиков и визуализации данных. Она поддерживает построение линий, гистограмм, точечных диаграмм и других типов графиков.

### Пример:
```python
import matplotlib.pyplot as plt
plt.plot([1, 2, 3], [4, 5, 6])
plt.savefig('line_plot.png')  # Сохранение графика в файл
```

---

## 30. NumPy

NumPy — библиотека для работы с многомерными массивами и выполнения математических операций. Она значительно ускоряет вычисления по сравнению с обычными списками Python.

### Пример:
```python
import numpy as np
arr = np.array([1, 2, 3])
print(arr * 2)  # [2 4 6]
```

---

## 31. Работа с табличными данными. Pandas

Pandas — библиотека для анализа и обработки табличных данных. Она предоставляет структуры данных, такие как `DataFrame`, для удобной работы с таблицами.

### Пример:
```python
import pandas as pd
df = pd.DataFrame({'A': [1, 2], 'B': [3, 4]})
print(df)
```
**Вывод:**
```
   A  B
0  1  3
1  2  4
```